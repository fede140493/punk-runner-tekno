<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PUNK RUNNER TEKNO</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
  <style>body{margin:0;padding:0;overflow:hidden;background:#000;}</style>
</head>
<body>
<script>
  // Fallback se non Ã¨ in un contesto Telegram
  if (!window.Telegram?.WebApp) {
    window.Telegram = {
      WebApp: {
        ready: () => {},
        expand: () => {},
        MainButton: { setText(){return this;}, show(){return this;}, onClick(cb){this._cb=cb; return this;} },
        sendData: (d) => alert("Punti inviati: " + d)
      }
    };
  }

  Telegram.WebApp.ready();
  Telegram.WebApp.expand();

  const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    backgroundColor: '#000',
    scene: {
      create: function () {
        this.add.text(100, 200, 'PUNK RUNNER TEKNO', { fontSize: '48px', fill: '#0f0' });
        this.add.text(100, 300, 'FUNZIONA!', { fontSize: '32px', fill: '#f00' });

        Telegram.WebApp.MainButton
          .setText("SALVA 10 PUNTI")
          .show()
          .onClick(() => {
            Telegram.WebApp.sendData(JSON.stringify({ tekno_points: 10 }));
          });
      }
    }
  };

  new Phaser.Game(config);
</script>
</body>
</html>

